FROM node:20-alpine
WORKDIR /app

COPY package.json package-lock.json* tsconfig.json ./
# Try ci, fall back to install if no lockfile
RUN (npm ci || npm install --no-audit --no-fund)

EXPOSE 8080 9229
CMD ["npm","run","dev"]